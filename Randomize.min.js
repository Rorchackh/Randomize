if(!Object.create){Object.create=function(b){if(arguments.length>1){throw new Error("Object.create implementation only accepts the first parameter.");}function a(){}a.prototype=b;
return new a();};}var Randomizer={selection:undefined,__SPACE__:" ",init:function(){Array.prototype.shuffle=function(){var f=this.length;if(f==0){return this;
}while(--f){var e=Math.floor(Math.random()*(f+1));var d=this[f];var c=this[e];this[f]=c;this[e]=d;}return this;};String.prototype.shuffle=function(){var b=this.split(""),f=b.length;
for(var e=f-1;e>0;e--){var c=Math.floor(Math.random()*(e+1));var d=b[e];b[e]=b[c];b[c]=d;}return b.join("");};return this;},randomize:function(){if(!Array.prototype.shuffle){this.init();
}nodes=this.getSelectedNodes();console.log(nodes);if(nodes.length==0){alert("Please select some text");return;}for(var a=nodes.length-1;a>=0;a--){this.traverseRecursively(nodes[a]);
}},traverseRecursively:function(a){var a=a||document.getElementsByTagName("body")[0];if(a.hasChildNodes()){var b=a.firstChild;while(b){if(b.nodeName.toLowerCase()!="script"){if(b.nodeType===1){this.traverseRecursively(b);
}else{if(b.nodeType===3){this.performShuffe(b);}}}b=b.nextSibling;}}else{if(a.nodeType===3){this.performShuffe(a);}}},performShuffe:function(b){strings=b.wholeText.split(this.__SPACE__).shuffle();
for(var a=strings.length-1;a>=0;a--){strings[a]=strings[a].shuffle();}b.nodeValue=b.nodeValue.replace(b.nodeValue,strings.join(this.__SPACE__));},nextNode:function(a){if(a.hasChildNodes()){return a.firstChild;
}else{while(a&&!a.nextSibling){a=a.parentNode;}if(!a){return null;}return a.nextSibling;}},getRangeSelectedNodes:function(b){var c=b.startContainer;var a=b.endContainer;
if(c==a){return[c];}var d=[];while(c&&c!=a){d.push(c=this.nextNode(c));}c=b.startContainer;while(c&&c!=b.commonAncestorContainer){d.unshift(c);c=c.parentNode;
}return d;},getSelectedNodes:function(){if(window.getSelection){var a=window.getSelection();if(!a.isCollapsed){return this.getRangeSelectedNodes(a.getRangeAt(0));
}}return[];}};var r=Object.create(Randomizer);r.init().randomize();